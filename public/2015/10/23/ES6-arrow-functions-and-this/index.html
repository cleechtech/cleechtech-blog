<!DOCTYPE html>
<html>
<head>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-KNQM2VC');</script>
	<!-- End Google Tag Manager -->

	<title>Connor Leech</title>

	<!-- Meta -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Favicon -->
	<link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">

	<!-- Fonts -->
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

	<!-- Bootstrap -->
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
	<link rel='stylesheet' href='css/readable.bootswatch.css'>
	<link rel='stylesheet' href='css/main.css'>

</head>
<body id='wrapper'>
	<div class='container blog-post'>
	<div class='row'>
		<div class='col-sm-12'>
			<a href='/' class="btn btn-yellow btn-circle" style='color:grey;'>
            	<i class="fa fa-home fa-2"></i>
        	</a>
		</div>
	</div>
	<div class='row'>
		<h1 class='author-name'>ES6 arrow functions and this</h1>
	    October 23, 2015 
	    <hr />
		<p>ES6 is the upcoming standard for javascript. You can use ES6 features today by including babel.js or the jsx transformer in your html file. React uses JSX and the JSX transformer library to take advantage of ES6 features and generate components. Angular 2.0 uses typescript to implement <a href="http://stackoverflow.com/a/22386542/2031033" target="_blank" rel="external">select</a> ES6 features. Moving forward React and Angular will commonly use arrow functions. If you are familiar with coffeescript you already know about them. Below is a rundown of arrow functions and this.</p>
<a id="more"></a>
<p>To run the ES6 version of javascript in chrome download <a href="https://chrome.google.com/webstore/detail/scratch-js/alploljligeomonipppgaahpkenfnfkn?hl=en-US" target="_blank" rel="external">Scratch JS</a> and a new tab will be added to your console.</p>
<p><b>arrow functions</b> - at first arrow functions seemed obvious.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Expression bodies</span></div><div class="line"><span class="keyword">var</span> odds = evens.map(<span class="function"><span class="params">v</span> =&gt;</span> v + <span class="number">1</span>);</div><div class="line"><span class="keyword">var</span> nums = evens.map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> v + i);</div><div class="line"></div><div class="line"><span class="comment">// Statement bodies</span></div><div class="line">nums.forEach(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (v % <span class="number">5</span> === <span class="number">0</span>)</div><div class="line">    fives.push(v);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>You don’t need return statements. The first letter is the parameter. If there are multiple parameters use parenthesis. The syntax change makes writing javascript especially more clean when writing this. </p>
<p><b>arrow functions and this</b> - Unlike functions, arrows share the same lexical this as their surrounding code.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ES6 Code</span></div><div class="line"><span class="keyword">var</span> bob = &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">"Bob"</span>,</div><div class="line">  <span class="attr">friends</span>: [<span class="string">'Jane'</span>, <span class="string">'Mary'</span>, <span class="string">'Dan'</span>],</div><div class="line">  printFriends() &#123;</div><div class="line">    <span class="keyword">this</span>.friends.forEach(<span class="function"><span class="params">f</span> =&gt;</span></div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">" knows "</span> + f));</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">bob.printFriends();</div><div class="line"></div><div class="line"><span class="comment">// Vanilla.js</span></div><div class="line"><span class="keyword">var</span> joe = &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">"Joe"</span>,</div><div class="line">  <span class="attr">friends</span>: [<span class="string">'Bob'</span>, <span class="string">'Lue'</span>, <span class="string">'Shaniqua'</span>],</div><div class="line">  <span class="attr">printFriends</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.friends.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// window (global this)</span></div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">" knows "</span> + f);</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">joe.printFriends();</div></pre></td></tr></table></figure>
<p>this.name in vanilla JS is an empty string. Type window.name in the browser console, you’ll get empty string. this in the vanilla JS refers to window, not the joe object. The ES6 code will work as expected and print “Bob know Jane” etc. Using arrow functions this.friends and this.name share the same this value.</p>
<p>In order to make the ES5 vanilla JS code to work we have to store the value of this to a variable so we can access the name property of the parent (in this case the joe object).<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> joe = &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">"Joe"</span>,</div><div class="line">  <span class="attr">friends</span>: [<span class="string">'Bob'</span>, <span class="string">'Lue'</span>, <span class="string">'Shaniqua'</span>],</div><div class="line">  <span class="attr">printFriends</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> _this = <span class="keyword">this</span>;  <span class="comment">// refers to joe object</span></div><div class="line">    <span class="keyword">this</span>.friends.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(_this.name + <span class="string">" knows "</span> + f)</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Now we get the expected behavior. In summary, this within arrow functions is the same as this in the parent. No new scope is created with arrow functions.</p>
<p><b>Resource:</b><br><a href="https://babeljs.io/docs/learn-es6/" target="_blank" rel="external">babel website</a> -  learn es6</p>

	</div>
</div>
	
</body>
</html>