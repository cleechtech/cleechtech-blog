<!DOCTYPE html>
<html>
<head>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-KNQM2VC');</script>
	<!-- End Google Tag Manager -->

	<title>Connor Leech</title>

	<!-- Meta -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Favicon -->
	<link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">

	<!-- Bootstrap -->
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
	
	<!-- Fonts -->
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

	<!-- Custom -->
	<link rel='stylesheet' href='css/theme.css'>
	<style>
	  .navbar-toggler {
	    z-index: 1;
	  }
	  @media (max-width: 576px) {
	    nav > .container {
	      width: 100%;
	    }
	  }
	  </style>
</head>
<body id='wrapper'>
	<!-- Navigation -->
<nav class="navbar fixed-top navbar-toggleable-md navbar-light is-fixed" id="mainNav">
  <div class="container">
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu <i class="fa fa-bars"></i>
    </button>
    <a class="navbar-brand page-scroll" href="/">Connor Leech</a>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
        	<a class="nav-link page-scroll" href="/blog">Blog</a>
        	<a class="nav-link page-scroll" href="/work">Work</a>
        	<a class="nav-link page-scroll" href="/about">About</a>
        	<a class="nav-link page-scroll" href="/contact">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
	<div class='container blog-post'>
	<div class='row'>
		<div class='col-sm-12'>
			<a href='/' class="btn btn-yellow btn-circle" style='color:grey;'>
            	<i class="fa fa-home fa-2"></i>
        	</a>
		</div>
	</div>
	<div class='row'>
		<h1 class='author-name'>Build todo list with angular and DRF</h1>
	    October 23, 2015 
	    <hr />
		<p>The source code is <a href="https://github.com/jasonshark/angular-drf-todolist" target="_blank" rel="external">available here</a>.</p>
<p>In this app we’ll build a persistent todo list. The backend and database will be handled by django. django rest framework will convert the tabled data to JSON and angular will bring the frontend magic.</p>
<a id="more"></a>
<p><img src="http://cloud-4.steamusercontent.com/ugc/541889413256781007/8E0E1D04169BD1922CA1467046699255CEB69E02/" alt="this is angular"></p>
<h3 id="Clone-the-starter-project"><a href="#Clone-the-starter-project" class="headerlink" title="Clone the starter project"></a>Clone the starter project</h3><p>I made a <a href="git@github.com:jasonshark/django-drf-angular-starter-project.git">angular-drf starter project</a>. We’re going to start from there and build out the todolist. Clone it and give it a new name</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> git@github.com:jasonshark/django-drf-angular-starter-project.git</span></div><div class="line"><span class="meta">$</span><span class="bash"> mv django-drf-angular-starter-project angular-drf-todolist</span></div><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> angular-drf-todolist</span></div></pre></td></tr></table></figure>
<h3 id="Set-up-virtual-environment"><a href="#Set-up-virtual-environment" class="headerlink" title="Set up virtual environment"></a>Set up virtual environment</h3><p>We do this so we install the packages locally instead of to your machine. Our project dependencies are specified in <code>requirements.txt</code>.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> ~/.bash_profile</span></div><div class="line"><span class="meta">$</span><span class="bash"> mkvirtualenv angular-drf-todolist</span></div><div class="line"><span class="meta">$</span><span class="bash"> lsvirtualenv</span></div><div class="line"><span class="meta">$</span><span class="bash"> pip install -r requirements.txt</span></div></pre></td></tr></table></figure>
<h3 id="Launch-server"><a href="#Launch-server" class="headerlink" title="Launch server"></a>Launch server</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> ./manage.py migrate</span></div><div class="line"><span class="meta">$</span><span class="bash"> ./manage.py runserver</span></div></pre></td></tr></table></figure>
<p>This sets up our database and starts the server. Go to <code>localhost:8000</code>. Now angular and drf play nicely</p>
<p><img src="http://i62.tinypic.com/2z3uvfb.png" alt="django on the right"></p>
<h3 id="Create-Todo-model"><a href="#Create-Todo-model" class="headerlink" title="Create Todo model"></a>Create Todo model</h3><p>This is the same as creating a table in our database to hold all of the todos. Each todo will take up a row in the table. The model defines what the columns are going to be. For each todo we’ll have a title, description and is_completed.</p>
<p><strong>jsframework/models.py</strong><br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="title">from</span> django.db <span class="keyword">import</span> models</div><div class="line"><span class="class"></span></div><div class="line"><span class="keyword">class</span> <span class="type">Todo</span>(<span class="title">models</span>.<span class="type">Model</span>):</div><div class="line">    title = models.<span class="type">CharField</span>(<span class="title">max_length</span>=75)</div><div class="line">    description = models.<span class="type">TextField</span>()</div><div class="line">    is_completed = models.<span class="type">BooleanField</span>(<span class="title">default</span>=<span class="type">False</span>)</div><div class="line"></div><div class="line">    def __unicode__(<span class="title">self</span>):</div><div class="line">        return self.title</div></pre></td></tr></table></figure></p>
<p>Then make the migrations that turns the above python into a database table: </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> ./manage.py makemigrations</span></div><div class="line"><span class="meta">$</span><span class="bash"> ./manage.py migrate</span></div></pre></td></tr></table></figure>
<p>Check that it worked by opening up the shell and adding a todo:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> ./manage.py shell</span></div><div class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; from jsframework.models import Todo</span></div><div class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; Todo.objects.all()</span></div><div class="line">[]</div><div class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; first_todo = Todo(title=<span class="string">'first todo'</span>,description=<span class="string">'a little bit softer now'</span>,is_completed=<span class="string">'false'</span>)</span></div><div class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; first_todo.save()</span></div><div class="line">[&lt;Todo: first todo&gt;]</div></pre></td></tr></table></figure>
<p>At first there’s nothing, now it looks like we added a todo to the database. Really we want to display this in the browser as JSON so angular can play with it.</p>
<h3 id="Serialize-to-JSON"><a href="#Serialize-to-JSON" class="headerlink" title="Serialize to JSON"></a>Serialize to JSON</h3><p>Create a TodoSerializer in a new file <code>jsframework/serializers.py</code>. This will convert our data into json.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</div><div class="line"><span class="keyword">from</span> jsframework.models <span class="keyword">import</span> Todo</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoSerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></div><div class="line">        model = Todo</div></pre></td></tr></table></figure>
<p>Now prep our views for rendering JSON:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</div><div class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> viewsets</div><div class="line"></div><div class="line"><span class="keyword">from</span> jsframework.models <span class="keyword">import</span> Todo</div><div class="line"><span class="keyword">from</span> serializers <span class="keyword">import</span> TodoSerializer</div><div class="line"></div><div class="line"><span class="comment"># Todos routes automatically generated</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoViewSet</span><span class="params">(viewsets.ModelViewSet)</span>:</span></div><div class="line">    queryset = Todo.objects.all()</div><div class="line">    serializer_class = TodoSerializer</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># Home route to send template to angular</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(request)</span>:</span></div><div class="line">    <span class="keyword">return</span> render(request, <span class="string">'jsframework/base.html'</span>)</div></pre></td></tr></table></figure>
<p>We use the <a href="http://www.django-rest-framework.org/api-guide/viewsets/#modelviewset" target="_blank" rel="external">ModelViewSet</a> which automatically provides us endpoints for <code>.list()</code>, <code>.retrieve()</code>, <code>.create()</code>, <code>.update()</code>, and <code>.destroy()</code>. This is where DRF magic really happens. With that small class above we have the views necessary to create, read, update and delete todos. In the router we’re going to map these out.</p>
<p>Update our routes in <code>jsframework/urls.py</code>. These will define where and what JSON should be displayed.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> patterns, include, url</div><div class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> routers</div><div class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</div><div class="line"></div><div class="line">todo_router = routers.DefaultRouter()</div><div class="line">todo_router.register(<span class="string">r'todos'</span>, views.TodoViewSet, base_name=<span class="string">'todos'</span>)</div><div class="line"></div><div class="line">urlpatterns = [</div><div class="line">    <span class="comment"># Send base.html to angular</span></div><div class="line">    url(<span class="string">r'^$'</span>, views.index, name=<span class="string">'index'</span>),</div><div class="line"></div><div class="line">    url(<span class="string">'^api/'</span>, include(todo_router.urls)),</div><div class="line">]</div></pre></td></tr></table></figure>
<p>Hit <code>http://localhost:8000/api/todos</code> in your browser and you’ll see a JSON array of Todo objects in the nice DRF console. There are buttons for creating (using PUT requests), updating (PUT requests) and deleting (DELETE requests).</p>
<h3 id="Hook-this-sucker-up-to-the-frontend"><a href="#Hook-this-sucker-up-to-the-frontend" class="headerlink" title="Hook this sucker up to the frontend"></a>Hook this sucker up to the frontend</h3><p>We are going to go a bit quick over the angular stuff because there’s a full functional API.</p>
<p>First define the routes and a constant for our API endpoint.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> app = angular.module(<span class="string">'drf-angular'</span>, [</div><div class="line">    <span class="string">'ui.router'</span></div><div class="line">]);</div><div class="line"></div><div class="line">app.constant(<span class="string">'BASE_URL'</span>, <span class="string">'http://localhost:8000/api/todos/'</span>);</div><div class="line"></div><div class="line">app.config(<span class="function"><span class="keyword">function</span><span class="params">($stateProvider, $urlRouterProvider)</span></span>&#123;</div><div class="line">    $stateProvider</div><div class="line">        .state(<span class="string">'home'</span>, &#123;</div><div class="line">            url: <span class="string">'/'</span>,</div><div class="line">            templateUrl: <span class="string">'/static/templates/home.html'</span>,</div><div class="line">            controller: <span class="string">'MainCtrl'</span></div><div class="line">        &#125;)</div><div class="line">        .state(<span class="string">'add-todo'</span>, &#123;</div><div class="line">            url: <span class="string">"/add"</span>,</div><div class="line">            templateUrl: <span class="string">'static/templates/add_todo.html'</span>,</div><div class="line">            controller: <span class="string">'MainCtrl'</span></div><div class="line">        &#125;);</div><div class="line"></div><div class="line">    $urlRouterProvider.otherwise(<span class="string">'/'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Special note, we are using <a href="https://github.com/angular-ui/ui-router" target="_blank" rel="external">ui-router</a>. Also, make sure you have trailing slashes on your urls when making requests to DRF. The trailing slash had us stumped for a bit.</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// will break without slash at the end</span></div><div class="line">app.constant('BASE_URL', 'http://localhost:<span class="number">8000</span>/api/todos/');</div></pre></td></tr></table></figure>
<p>Then define a service that makes requests to DRF and returns promises. We probably could have used <a href="https://docs.angularjs.org/api/ngResource/service/$resource" target="_blank" rel="external">$resource</a> or <a href="https://github.com/mgonto/restangular" target="_blank" rel="external">Restangular</a> here but I am not very familiar with them and do not know if they will survive in Angular 2.0. $http is simple and straight forward. Make http requests and return promises.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">app.service(<span class="string">'Todos'</span>, <span class="function"><span class="keyword">function</span><span class="params">($http, BASE_URL)</span></span>&#123;</div><div class="line">    <span class="keyword">var</span> Todos = &#123;&#125;;</div><div class="line"></div><div class="line">    Todos.all = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> $http.get(BASE_URL);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    Todos.update = <span class="function"><span class="keyword">function</span><span class="params">(updatedTodo)</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> $http.put(BASE_URL + updatedTodo.id, updatedTodo);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    Todos.delete = <span class="function"><span class="keyword">function</span><span class="params">(id)</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> $http.delete(BASE_URL + id + <span class="string">'/'</span>);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    Todos.addOne = <span class="function"><span class="keyword">function</span><span class="params">(newTodo)</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> $http.post(BASE_URL, newTodo)</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> Todos;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Call the service methods in the controller:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">app.controller(<span class="string">'MainCtrl'</span>, <span class="function"><span class="keyword">function</span><span class="params">($scope, Todos, $state)</span></span>&#123;</div><div class="line">    $scope.newTodo = &#123;&#125;;</div><div class="line">    $scope.addTodo = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">        Todos.addOne($scope.newTodo)</div><div class="line">            .then(<span class="function"><span class="keyword">function</span><span class="params">(res)</span></span>&#123;</div><div class="line">                <span class="comment">// redirect to homepage once added</span></div><div class="line">                $state.go(<span class="string">'home'</span>);</div><div class="line">            &#125;);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    $scope.toggleCompleted = <span class="function"><span class="keyword">function</span><span class="params">(todo)</span> </span>&#123;</div><div class="line">        Todos.update(todo);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    $scope.deleteTodo = <span class="function"><span class="keyword">function</span><span class="params">(id)</span></span>&#123;</div><div class="line">        Todos.delete(id);</div><div class="line">        <span class="comment">// update the list in ui</span></div><div class="line">        $scope.todos = $scope.todos.filter(<span class="function"><span class="keyword">function</span><span class="params">(todo)</span></span>&#123;</div><div class="line">            <span class="keyword">return</span> todo.id !== id;</div><div class="line">        &#125;)</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    Todos.all().then(<span class="function"><span class="keyword">function</span><span class="params">(res)</span></span>&#123;</div><div class="line">        $scope.todos = res.data;</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>The delete function is a bit tricky. We have to update <code>$scope.todos</code> on the client and we don’t really want to run the digest cycle again or send another http request, there’s no need. We could do some error handling to make sure the todo was <em>really</em> deleted from the database. Here we filter the normal array, if the id property matches the one we want to delete get rid of it. This solution came from <a href="http://stackoverflow.com/questions/10024866/remove-object-from-array-using-javascript" target="_blank" rel="external">StacktotheOverflow</a>.</p>
<h3 id="Add-add-the-markup"><a href="#Add-add-the-markup" class="headerlink" title="Add add the markup"></a>Add add the markup</h3><p><strong>jsframework/static/templates/home.html</strong><br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'row text-center'</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'col-sm-4 col-sm-offset-4'</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>All Todos<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">ui-sref</span>=<span class="string">"add-todo"</span> <span class="attr">class</span>=<span class="string">'btn btn-primary btn-lg'</span> <span class="attr">style</span>=<span class="string">'margin-bottom:20px;'</span>&gt;</span>Add Todo<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"list-group"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">ng-repeat</span>=<span class="string">'todo in todos'</span> <span class="attr">ng-class</span>=<span class="string">"</span></span><span class="template-variable">&#123;completed: todo.is_completed&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">class</span>=<span class="string">"list-group-item"</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">ng-checked</span>=<span class="string">"todo.is_completed"</span> <span class="attr">ng-change</span>=<span class="string">"toggleCompleted(todo)"</span> <span class="attr">ng-model</span>=<span class="string">'todo.is_completed'</span>&gt;</span>  <span class="template-variable">&#123;&#123;todo.title&#125;</span><span class="xml">&#125;</span></div><div class="line"></div><div class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">'badge'</span> <span class="attr">ng-click</span>=<span class="string">"deleteTodo(todo.id)"</span>&gt;</span>X<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>The markup will <code>ng-repeat</code> over the todos. <a href="https://docs.angularjs.org/api/ng/directive/ngChange" target="_blank" rel="external">ng-change</a> is a nifty directive that executes a function when whatever you pass to it is updated or changed. I stole this from the <a href="https://github.com/tastejs/todomvc/tree/gh-pages/examples/angularjs" target="_blank" rel="external">Angular.js TodoMVC</a> implementation. <a href="https://docs.angularjs.org/api/ng/directive/ngChecked" target="_blank" rel="external">ng-checked</a> will check the checkbox based on the truthy or falsey value we pass to it. <a href="https://docs.angularjs.org/api/ng/directive/ngClass" target="_blank" rel="external">ng-class</a> is also kind of cool. <a href="https://scotch.io/tutorials/the-many-ways-to-use-ngclass" target="_blank" rel="external">scotch.io</a> has a tutorial there about the many ways to use ngClass.</p>
<p>The CSS for this project is mad simple:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.completed</span> &#123;</div><div class="line">    <span class="attribute">text-decoration</span>: line-through;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.badge</span> &#123;</div><div class="line">    <span class="attribute">cursor</span>: pointer;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Then we have a page to add a todo:</p>
<p><strong>jsframework/static/templates/add_todo.html</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">'row text-center'</span>&gt;</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'col-sm-4 col-sm-offset-4'</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Add a todo<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span>=<span class="string">"newTodo.title"</span> <span class="attr">placeholder</span>=<span class="string">"title"</span> <span class="attr">class</span>=<span class="string">'form-control'</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"textarea"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">rows</span>=<span class="string">"5"</span> <span class="attr">ng-model</span>=<span class="string">"newTodo.description"</span> <span class="attr">placeholder</span>=<span class="string">"description"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">'btn btn-success btn-lg'</span> <span class="attr">ng-click</span>=<span class="string">"addTodo()"</span>&gt;</span>Add<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p><img src="http://media3.giphy.com/media/jYAGkoghdmD9S/giphy.gif" alt=""></p>
<p>If you like the tutorial give the <a href="https://github.com/jasonshark/angular-drf-todolist" target="_blank" rel="external">repo</a> a star!</p>

	</div>
</div>
	
</body>
</html>