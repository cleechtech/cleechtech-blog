<!DOCTYPE html>
<html>
<head>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-KNQM2VC');</script>
	<!-- End Google Tag Manager -->

	<title>Connor Leech</title>

	<!-- Meta -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Favicon -->
	<link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">

	<!-- Bootstrap -->
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
	
	<!-- Fonts -->
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

	<!-- Custom -->
	<link rel='stylesheet' href='css/theme.css'>
	<style>
	  .navbar-toggler {
	    z-index: 1;
	  }
	  @media (max-width: 576px) {
	    nav > .container {
	      width: 100%;
	    }
	  }
	  </style>
</head>
<body id='wrapper'>
	<!-- Navigation -->
<nav class="navbar fixed-top navbar-toggleable-md navbar-light is-fixed" id="mainNav">
  <div class="container">
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu <i class="fa fa-bars"></i>
    </button>
    <a class="navbar-brand page-scroll" href="/">Connor Leech</a>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
        	<a class="nav-link page-scroll" href="/blog">Blog</a>
        	<a class="nav-link page-scroll" href="/work">Work</a>
        	<a class="nav-link page-scroll" href="/about">About</a>
        	<a class="nav-link page-scroll" href="/contact">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
	<div class='container blog-post'>
	<div class='row'>
		<div class='col-sm-12'>
			<a href='/' class="btn btn-yellow btn-circle" style='color:grey;'>
            	<i class="fa fa-home fa-2"></i>
        	</a>
		</div>
	</div>
	<div class='row'>
		<h1 class='author-name'>Build a todo app with angularFire</h1>
	    October 23, 2015 
	    <hr />
		<p>Hey everyone! <a href="https://www.firebase.com/" target="_blank" rel="external">Firebase</a> and angular.js are awesome tools that you should check out. Today we’re going to build and deploy a persistent client side app with only front end code. I modeled this heavily off the Firebase + Angular <a href="https://github.com/tastejs/todomvc/tree/master/examples/firebase-angular" target="_blank" rel="external">TodoMVC</a>. It’s a great project but the code seemed a bit heavy. We’re gunna use the most recent version of <a href="https://www.firebase.com/docs/web/libraries/angular/" target="_blank" rel="external">angularFire</a>  and bootstrap for styles</p>
<p><a href="https://github.com/jasonshark/angularFire-todo" target="_blank" rel="external">SOURCE CODE</a> is here</p>
<p><a href="https://firebasingtodos.firebaseapp.com/" target="_blank" rel="external">DEMO</a> is here</p>
<a id="more"></a>
<h3 id="Get-started"><a href="#Get-started" class="headerlink" title="Get started"></a>Get started</h3><p><a href="https://www.firebase.com/signup/" target="_blank" rel="external">Sign up</a> for a free firebase account. This is basically going to be our database. Somewhere deep down Firebase uses MongoDB. Our database is going to look like a neat JSON object</p>
<p>Create a firebase instance (called a Forge) for this project:</p>
<p>{<1>}<img src="/content/images/2014/12/Screen-Shot-2014-12-27-at-2-02-59-PM.png" alt=""></1></p>
<p>Once that’s set up you can easily add <a href="https://www.firebase.com/docs/web/libraries/angular/api.html#angularfire-user-authentication-and-management" target="_blank" rel="external">authentication</a> and <a href="https://www.firebase.com/docs/security/guide/" target="_blank" rel="external">security rules</a> for real apps. We’re gunna spin up some three way data binding between the $scope, view and our firebase forge, smile and call it a day</p>
<h3 id="Start-coding"><a href="#Start-coding" class="headerlink" title="Start coding"></a>Start coding</h3><p>Setup a project and a static website:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> mkdir firebase-todos &amp;&amp; <span class="built_in">cd</span> firebase-todos</span></div><div class="line"><span class="meta">$</span><span class="bash"> touch index.html app.js style.css</span></div></pre></td></tr></table></figure></p>
<p><strong>index.html</strong><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">ng-app</span>=<span class="string">"todomvc"</span> <span class="attr">data-framework</span>=<span class="string">"firebase"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Firebase &amp;amp; AngularJS todo app<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">style</span> <span class="attr">rel</span>=<span class="string">'stylesheet'</span> <span class="attr">href</span>=<span class="string">'style.css'</span>&gt;</span><span class="xml"></span></div><div class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"><span class="selector-attr">[ng-cloak]</span> &#123; <span class="attribute">display</span>: none; &#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>Firebase Todo<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- AngularJS --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- Firebase --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.firebase.com/js/client/2.0.4/firebase.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- AngularFire --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.firebase.com/libs/angularfire/0.9.0/angularfire.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'js/app.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>So here we included cdn to bootstrap for easy to use css classes and three javascript libraries. We have angular.js, firebase’s javascript library and angularFire. Angularfire defines a $firebase service (link to <a href="https://www.firebase.com/docs/web/libraries/angular/api.html" target="_blank" rel="external">API docs</a>) that will make our three way data binding super simple and angulartastic. That means changes to data in the database, browser or $scope all talk to each other and react instantly without having to worry about $scope.$apply() or anything nutty. Inject the firebase service into your main angular module (<strong>app.js</strong> file):<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">var todomvc</span> = angular.module(<span class="string">'todomvc'</span>, [<span class="string">'firebase'</span>]);</div></pre></td></tr></table></figure></p>
<p>This gives us access to <code>$firebase</code> service that we can inject as a dependency anywhere in our app. If you don’t know what that means sit tight, it’s easy.</p>
<h3 id="Add-lipstick"><a href="#Add-lipstick" class="headerlink" title="Add lipstick"></a>Add lipstick</h3><p>I don’t really understand how to debug or explain CSS. Copy and paste this into <strong>style.css</strong>:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.editing</span> &#123;</div><div class="line">	<span class="attribute">border-bottom</span>: none;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.editing</span> <span class="selector-class">.edit</span> &#123;</div><div class="line">	<span class="attribute">display</span>: block;</div><div class="line">	<span class="attribute">width</span>: <span class="number">506px</span>;</div><div class="line">	<span class="attribute">padding</span>: <span class="number">13px</span> <span class="number">17px</span> <span class="number">12px</span> <span class="number">17px</span>;</div><div class="line">	<span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">43px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.editing</span> <span class="selector-class">.view</span> &#123;</div><div class="line">	<span class="attribute">display</span>: none;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.editing</span><span class="selector-pseudo">:last-child</span> &#123;</div><div class="line">	<span class="attribute">margin-bottom</span>: -<span class="number">1px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>I extracted these relevant bits from <a href="https://github.com/tastejs/todomvc/blob/master/examples/firebase-angular/bower_components/todomvc-common/base.css" target="_blank" rel="external">TodoMVC’s base.css</a>. For the most part we’ll use bootstrap.</p>
<h3 id="Add-and-delete-todos"><a href="#Add-and-delete-todos" class="headerlink" title="Add and delete todos"></a>Add and delete todos</h3><p>So here’s an html setup of our todolist that will let us add and delte todos:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">'container'</span> ng-controller=<span class="string">"TodoCtrl"</span>&gt;</div><div class="line">	<span class="xml"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">'row'</span>&gt;</span></span></div><div class="line">		<span class="tag">&lt;<span class="name">header</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">'text-center'</span>&gt;</span>What do you have to do?<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">form</span> <span class="attr">ng-submit</span>=<span class="string">"addTodo()"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">'form-control'</span> <span class="attr">placeholder</span>=<span class="string">"What needs to be done?"</span> <span class="attr">ng-model</span>=<span class="string">"newTodo"</span> <span class="attr">autofocus</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">header</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">section</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>All things todo<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>Double-click to edit a todo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"list-group"</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-repeat</span>=<span class="string">"todo in todos"</span> <span class="attr">class</span>=<span class="string">"list-group-item"</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"view"</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123;todo.title&#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">'btn btn-danger pull-right'</span> <span class="attr">ng-click</span>=<span class="string">"removeTodo(todo)"</span>&gt;</span>X<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>So we need a <code>TodoCtrl</code> and to define <code>addTodo</code> and <code>removeTodo</code> methods on that controller’s scope.</p>
<p><strong>app.js</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">todomvc.controller(<span class="string">'TodoCtrl'</span>, <span class="function"><span class="keyword">function</span> <span class="title">TodoCtrl</span><span class="params">($scope, $firebase)</span> </span>&#123;</div><div class="line">	<span class="keyword">var</span> fireRef = <span class="keyword">new</span> Firebase(<span class="string">'https://&lt;NAME_OF_YOUR_FIREBASE&gt;.firebaseio.com/'</span>);</div><div class="line">	$scope.todos = $firebase(fireRef).$asArray();</div><div class="line">	$scope.newTodo = <span class="string">''</span>;</div><div class="line"></div><div class="line">	$scope.addTodo = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">var</span> newTodo = $scope.newTodo.trim();</div><div class="line">		<span class="keyword">if</span> (!newTodo.length) &#123;</div><div class="line">			<span class="keyword">return</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="comment">// push to firebase</span></div><div class="line">		$scope.todos.$add(&#123;</div><div class="line">			title: newTodo,</div><div class="line">			completed: <span class="keyword">false</span></div><div class="line">		&#125;);</div><div class="line">		$scope.newTodo = <span class="string">''</span>;</div><div class="line">	&#125;;</div><div class="line">    </div><div class="line">	$scope.removeTodo = <span class="function"><span class="keyword">function</span><span class="params">(todo)</span></span>&#123;</div><div class="line">		$scope.todos.$remove(todo);</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>Most everything is going to be in this controller. fireRef creates a reference to our firebase database instance. The url I use is <code>https://firebasingtodos.firebaseio.com/</code>. It’ll be whatever-you-named-your-forge.firebaseio.com/ in your code. This is kind of like an API endpoint for transorming your data. Next we save the whole database as an array an attach that to the controller’s scope. In the addTodo and removeTodo bits we use methods of the firebase array <code>.$add()</code> and <code>.$remove()</code>. That’s it! Now you can post and remove todos, refresh the page and everything stays the same. Open up your Forge in a different browser and you’ll see your database and the browser update at the same time. Neat huh? This only scratches the surface. Make sure to check out the <a href="https://www.firebase.com/docs/web/libraries/angular/api.html" target="_blank" rel="external">AngularFire API docs</a> to see all the neat angularesque things you can do to your data.</p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>Most of the rest of the code for marking todos as completed and whatnot I stole from the todoMVC example. There is <a href="https://github.com/jasonshark/angularFire-todo/blob/master/index.html" target="_blank" rel="external">one really ugly bit of code</a> that I have because I couldn’t get the line-through effect to work with ng-class and CSS.</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">ng-dblclick</span>=<span class="string">"editTodo(todo)"</span> <span class="attr">ng-if</span>=<span class="string">'todo.completed'</span> <span class="attr">ng-style</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;'text-decoration': 'line-through'&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span><span class="template-variable">&#123;&#123;todo.title&#125;</span><span class="xml">&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">ng-dblclick</span>=<span class="string">"editTodo(todo)"</span> <span class="attr">ng-if</span>=<span class="string">'!todo.completed'</span> <span class="attr">ng-style</span>=<span class="string">"</span></span><span class="template-variable">&#123;'text-decoration': 'none'&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span><span class="template-variable">&#123;&#123;todo.title&#125;</span><span class="xml">&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p>I repeated myself, used <code>ng-style</code> and <code>ng-if</code> based on the completion status of the task. This works but if you have a fix to clean this up please submit a pull request and I’ll merge that shit up.</p>
<p>Big props to the firebase team on building an awesome product and TodoMVC for all of their work. If you have questions about the code for this tutorial you can find me on <a href="https://twitter.com/cleechtech" target="_blank" rel="external">Twitter</a> or <a href="https://github.com/jasonshark" target="_blank" rel="external">Github</a>.</p>

	</div>
</div>
	
</body>
</html>